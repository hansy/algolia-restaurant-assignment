{"version":3,"sources":["webpack:///./src/App.vue?731d","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/router/index.js","webpack:///./src/lib/algolia.js","webpack:///./src/store/modules/restaurants/actions.js","webpack:///./src/store/modules/restaurants/index.js","webpack:///./src/store/modules/restaurants/mutations.js","webpack:///./src/store/modules/restaurants/state.js","webpack:///./src/store/modules/restaurants/getters.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticClass","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","vue_esm","use","vue_router_esm","router","mode","routes","path","component","e","then","bind","algoliasearch","_class","classCallCheck_default","client","index","initIndex","query","filters","offset","geo","callback","arr","options","join","facets","length","undefined","aroundLatLng","search","res","facetName","facetQuery","searchForFacetValues","err","content","facetHits","queryString","actions_algolia","algolia","actions_pushURL","params","obj","parse","push","restaurants","namespaced","actions","_ref","commit","state","results","console","log","paginate","_ref2","currentCount","searchFacetValues","_ref3","payload","searchFacets","hits","items","mutations","populateResults","processingTimeMS","totalCount","nbHits","addResults","concat","newSearch","addFilter","filter","clearFilters","clearFilter","indexOf","splice","populateFacets","item","value","count","clearFacet","regex","RegExp","i","match","addGeo","coords","initParams","getters","canPaginate","vuex_esm","store","Store","modules","config","productionTip","el","components","App","template"],"mappings":"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","file":"static/js/app.f32b2c61bb38e0d045f4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-10 offset-md-1\"},[_c('div',{staticClass:\"app\"},[_c('router-view')],1)])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-53edf6d4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-53edf6d4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!./assets/scss/index.scss\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-53edf6d4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-md-10 offset-md-1\">\n          <div class=\"app\">\n            <router-view/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n};\n</script>\n\n<style src=\"./assets/scss/index.scss\" lang=\"scss\"></style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import Vue from 'vue';\nimport Router from 'vue-router';\n\nVue.use(Router);\n\nexport default new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: () => import('@/components/Search'),\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","const algoliasearch = require('algoliasearch');\n\nconst joinArray = arr => arr.join(' AND ');\n\nexport default class {\n  constructor() {\n    this.client = algoliasearch(process.env.ALGOLIA_APPLICATION_ID, process.env.ALGOLIA_KEY);\n    this.index = this.client.initIndex(process.env.ALGOLIA_INDEX);\n  }\n\n  search(query, filters, offset, geo, callback) {\n    const options = {\n      query,\n      filters: joinArray(filters),\n      facets: ['cuisine', 'payment_options'],\n    };\n\n    if (offset) {\n      options.offset = offset;\n      options.length = 20;\n    }\n\n    if (geo !== undefined) {\n      options.aroundLatLng = geo;\n    }\n\n    this.index.search(options).then((res) => {\n      callback(res);\n    });\n  }\n\n  searchFacets(facetName, facetQuery, callback) {\n    this.index.searchForFacetValues({\n      facetName,\n      facetQuery,\n    }, (err, content) => {\n      if (err) throw err;\n\n      callback(content.facetHits);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/algolia.js","import router from '../../../router';\nimport Algolia from '../../../lib/algolia';\n\nconst queryString = require('query-string');\n\nconst algolia = new Algolia();\n\nconst pushURL = (params) => {\n  const obj = queryString.parse(params);\n  router.push({ name: 'home', query: obj });\n};\n\nexport const search = ({ commit, state }) => {\n  const query = state.query;\n  const filters = state.filters;\n  const offset = 0;\n  const geo = state.geo;\n\n  algolia.search(query, filters, offset, geo, (results) => {\n    console.log(results);\n    commit('populateResults', results);\n    pushURL(results.params);\n  });\n};\n\nexport const paginate = ({ commit, state }) => {\n  const query = state.query;\n  const filters = state.filters;\n  const offset = state.currentCount;\n  const geo = state.geo;\n\n  algolia.search(query, filters, offset, geo, (results) => {\n    commit('addResults', results);\n    pushURL(results.params);\n  });\n};\n\nexport const searchFacetValues = ({ commit }, payload) => {\n  algolia.searchFacets(payload.facetName, payload.facetQuery, (hits) => {\n    const obj = {\n      name: payload.facetName,\n      items: hits,\n    };\n    commit('populateFacets', obj);\n  });\n};\n\nexport default {\n  search,\n  paginate,\n  searchFacetValues,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/restaurants/actions.js","import actions from './actions';\nimport mutations from './mutations';\nimport state from './state';\nimport getters from './getters';\n\nexport default {\n  namespaced: true,\n  actions,\n  mutations,\n  state,\n  getters,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/restaurants/index.js","export default {\n  populateResults(state, payload) {\n    state.hits = payload.hits;\n    state.processingTimeMS = payload.processingTimeMS;\n    state.totalCount = payload.nbHits;\n    state.currentCount = payload.hits.length;\n    state.facets = payload.facets;\n  },\n  addResults(state, payload) {\n    state.hits = state.hits.concat(payload.hits);\n    state.processingTimeMS = payload.processingTimeMS;\n    state.totalCount = payload.nbHits;\n    state.currentCount += payload.hits.length;\n  },\n  newSearch(state, query) {\n    state.query = query;\n    state.offset = 0;\n    state.currentCount = 0;\n    state.totalCount = 0;\n    state.processingTimeMS = 0;\n    state.hits = [];\n  },\n  addFilter(state, filter) {\n    state.filters.push(filter);\n  },\n  clearFilters(state) {\n    state.filters = [];\n  },\n  clearFilter(state, filter) {\n    const index = state.filters.indexOf(filter);\n\n    if (index !== -1) {\n      state.filters.splice(index, 1);\n    }\n  },\n  populateFacets(state, payload) {\n    let facets = state.facets[payload.name];\n    const items = payload.items;\n\n    facets = {};\n\n    // eslint-disable-next-line\n    for (const item in items) {\n      facets[items[item].value] = items[item].count;\n    }\n\n    state.facets[payload.name] = facets;\n  },\n  clearFacet(state, facetName) {\n    const regex = new RegExp(`${facetName}:`, 'g');\n\n    for (let i = 0; i < state.filters.length; i += 1) {\n      if (state.filters[i].match(regex)) {\n        state.filters.splice(i, 1);\n      }\n    }\n  },\n  addGeo(state, coords) {\n    state.geo = coords;\n  },\n  initParams(state, payload) {\n    state.query = payload.query;\n    state.currentCount = payload.offset;\n    state.geo = payload.coords;\n    state.filters = payload.filters;\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/restaurants/mutations.js","export default {\n  hits: [],\n  totalCount: 0,\n  currentCount: 0,\n  processingTimeMS: 0,\n  query: '',\n  filters: [],\n  facets: undefined,\n  geo: undefined,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/restaurants/state.js","export default {\n  canPaginate: state => state.currentCount < state.totalCount,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/restaurants/getters.js","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nimport restaurants from './modules/restaurants';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: {\n    restaurants,\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport App from './App';\nimport router from './router';\nimport store from './store';\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}